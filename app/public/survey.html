<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Survey Page</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>
<body>

  <div class="container">

    <div class="row">
      <div class="col-lg-12">

        <div>
            <h2>Survey Questions</h2>
        </div>

        <hr>

        <div>
            <h3>About You</h3>
        </div>


        <form role="form">

            <div class="form-group">
                <label for="name"><h4>Name (Required)</h4></label>
                <input type="text" class="form-control" id="name">
            </div>
            <div class="form-group">
                <label for="photo"><h4>Link to Photo Image (Required)</h4></label>
                <input type="text" class="form-control" id="photo">
            </div>

            <hr>

            <div class="dropdown">
                <h3>Question 1</h3>
                <h4>You believe in destiny.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 2</h3>
                <h4>You prefer quality friendships over quantity.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 3</h3>
                <h4>You are family-oriented.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu3">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 4</h3>
                <h4>You have a religious affiliation.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu4">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 5</h3>
                <h4>You love new experiences and learning new things.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu5" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu5">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 6</h3>
                <h4>You are always looking for ways to better yourself.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu6" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu6">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 7</h3>
                <h4>You need to get your work done before you can relax.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu7" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu7">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 8</h3>
                <h4>You enjoy going to festivals and events.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu8" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu8">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 9</h3>
                <h4>You enjoy the company of a pet.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu9" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu9">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <div class="dropdown">
                <h3>Question 10</h3>
                <h4>You have an interest in vegetarianism or veganism.</h4>
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu10" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Select an Option
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu10">
                    <li><a href="#">5 (Strongly Agree)</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">1 (Strongly Disagree)</a></li>
                </ul>
            </div>
            <br>

            <button type="submit" class="btn btn-primary submit">Submit</button>

        </form>



      </div>
    </div>

  </div>

</body>
</html>

<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">

    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

    $(".submit").on("click", function(event) {
      event.preventDefault();

      // Here we grab the form elements
      var newReservation = {
        customerName: $("#reserve-name").val().trim(),
        phoneNumber: $("#reserve-phone").val().trim(),
        customerEmail: $("#reserve-email").val().trim(),
        customerID: $("#reserve-unique-id").val().trim()
      };

        var newUser = {
            name: $('#name').val().trim(),
            photo: $('#photo').val().trim(),
            scores: [ 
                        $('#dropdownMenu1').val(), $('#dropdownMenu2').val(), $('#dropdownMenu3').val(), $('#dropdownMenu4').val(), $('#dropdownMenu5').val(),
                        $('#dropdownMenu6').val(), $('#dropdownMenu7').val(), $('#dropdownMenu8').val(), $('#dropdownMenu9').val(), $('#dropdownMenu10').val()
            ]
        };

      console.log(newUser);

      // This line is the magic. It"s very similar to the standard ajax function we used.
      // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
      // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
      // depending on if a tables is available or not.

      $.post("/api/friends", newUser,
        function(data) {

        //   // If a table is available... tell user they are booked.
        //   if (data) {
        //     alert("Yay! You are officially booked!");
        //   }

        //   // If a table is available... tell user they on the waiting list.
        //   else {
        //     alert("Sorry you are on the wait list");
        //   }

          // Clear the form when submitting
          $("#name").val("");
          $("#photo").val("");

        });

    });

</script>
