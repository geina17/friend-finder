<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Survey Page</title>

  <!-- JQuery, Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>

  <div class="container">
    <div class="row">
      <div class="col-lg-12">

        <!-- Survey Title --> 
        <div>
            <h2>Survey Questions</h2>
        </div>
        <hr>
        <div>
            <h3>About You</h3>
        </div>

        <!-- Survey Questions -->
        <form data-toggle="validator" role="form">

            <div class="form-group">
                <label for="name"><h4>Name (Required)</h4></label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="form-group">
                <label for="photo"><h4>Link to Photo Image (Required)</h4></label>
                <input type="text" class="form-control" id="photo" required>
            </div>

            <hr>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 1</h3>
                    <h4>You sing in the shower.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q1" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 2</h3>
                    <h4>You enjoy art.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q2" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 3</h3>
                    <h4>You love pranks.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q3" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 4</h3>
                    <h4>You believe there are too many people on this earth.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q4" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 5</h3>
                    <h4>You hate vegetables.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q5" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 6</h3>
                    <h4>You hate your job.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q6" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 7</h3>
                    <h4>You love chocolate.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q7" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 8</h3>
                    <h4>You want kids.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q8" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 9</h3>
                    <h4>You like cats.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q9" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="sel1">                    
                    <h3>Question 10</h3>
                    <h4>You laugh at 'That's what she said...' jokes.</h4>
                </label>
                <div class="row">
                    <div class="col-md-2">  
                        <select class="form-control" id="q10" required>
                            <option value="" selected disabled>Select an Option</option>
                            <option value=5>Strongly Agree</option>
                            <option value=4>Agree</option>
                            <option value=3>Neutral</option>
                            <option value=2>Disagree</option>
                            <option value=1>Strongly Disagree</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="form-group">
                <button type="submit" class="btn btn-primary" id="submit-btn">Submit</button>
            </div>

        </form>

      </div>
    </div>
  </div>

  <!-- Match Results Modal -->
  <div id="results-modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Your Match:</h4>
            </div>
            <div class="modal-body">
                <h3 class="text-center" id="match-name"></h3>
                <img class="center-block" width="300px" id="match-img" src="" alt="">
                <br>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>            
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

</body>
</html>



<!-- SEND DATA TO SERVER -->
<script type="text/javascript">

    // Displays answer choice when clicked
    $(".dropdown-menu li a").click(function(){
        $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
        $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
    });

    // Input submission
    $("#submit-btn").on("click", function(event) {
        event.preventDefault();

        // Grab the form elements
        var newUserData = {
            name: $('#name').val().trim(),
            photo: $('#photo').val().trim(),
            scores: 
                [ 
                    $('#q1').val(), 
                    $('#q2').val(), 
                    $('#q3').val(), 
                    $('#q4').val(), 
                    $('#q5').val(),
                    $('#q6').val(), 
                    $('#q7').val(), 
                    $('#q8').val(), 
                    $('#q9').val(), 
                    $('#q10').val()
                ]
        };
        console.log(newUserData);

        // Display modal
        $.post("/api/friends", newUserData,
            function(data) {

                console.log(data);
                $('#match-name').text(data.name);
                $('#match-img').attr('src', data.photo);
                $('#results-modal').modal('toggle');

            }
        );

        // Clear the form
        $("#name").val("");
        $("#photo").val("");

    });

</script>
